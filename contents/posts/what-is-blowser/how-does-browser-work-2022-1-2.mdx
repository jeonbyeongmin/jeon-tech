---
date: '2022-01-02'
title: '브라우저는 어떻게 렌더링을 할까?'
categories: ['knowledge']
summary: '개발을 하다 보면 렌더링이 뜻대로 되지 않는 경우가 종종 있는 것 같습니다. 브라우저가 동작하는 방식을 제대로 이해하지 못한 것이 원인일 수 있습니다. 이 참에 브라우저의 주요 기능과 렌더링 엔진이 어떻게 작동하는지 정리해두면 좋겠다는 생각이 들었습니다.'
thumbnail: './images/safari.jpg'
---

개발을 하다 보면 렌더링이 뜻대로 되지 않는 경우가 종종 있는 것 같습니다. 브라우저가 동작하는 방식을 제대로 이해하지 못한 것이 원인일 수 있습니다. 이 참에 브라우저의 주요 기능과 렌더링 엔진이 어떻게 작동하는지 정리해두면 좋겠다는 생각이 들었습니다.

<hr />

## 브라우저의 기능

브라우저의 주요 기능은 사용자가 선택한 자원을 서버에 요청하고 브라우저에 표시하는 것입니다. 자원은 보통 HTML 문서이지만 이미지 등 다른 형태일 수 있습니다. 자원의 주소는 URI에 의해 정해집니다.

> #### URI과 URL
>
> URI은 특정 리소스를 식별하기 위한 고유한 문자열 시퀀스로서 URL를 포함하는 개념이고 URL은 특정 리소스가 네트워크 상에서 어디에 위치하는 지 알려주기 위한 규약입니다.



### 1. 브라우저의 기본 구조

브라우저의 주요 구성 요소는 다음과 같습니다.

<br/>

![](./images/arch.png)

<br/>

다 중요하지만 지금은 렌더링에 대한 이야기를 하고 있으니 렌더링 엔진에 대해서만 다루려고 합니다. 렌더링 엔진은 요청한 콘텐츠를 표시하는 일을 합니다. 예를 들어 HTML을 요청하면 HTML과 CSS를 파싱하여 화면에 표시합니다. 파싱 도중 script 태그를 만나면 일반적으로 렌더를 중단하고 script를 다운로드합니다.


렌더링 엔진은 브라우저 엔진 위에서 작동합니다. 즉 렌더링이 되고 있는 시점에서는 브라우저 API를 사용할 수 있습니다. localstorage와 같은 자료 저장소도 이용할 수 있구요.


## 렌더링 엔진

렌더링 엔진의 역할은 요청 받은 내용을 브라우저 화면에 표시하는 일입니다. 렌더링 엔진은 HTML 및 XML 문서와 이미지를 표시할 수 있습니다. 물론 플러그인이나 브라우저 확장 기능을 이용하면 다른 유형도 표시할 수 있지만 일반적으로 HTML과 이미지를 CSS로 표시하는 것이 주된 사용입니다. 브라우저마다 다른 렌더링 엔진을 사용하는데 파이어폭스는 모질라에서 만든 게코 엔진을 사용하고 사파리와 크롬은 웹킷 엔진을 사용합니다.

### 1. 렌더링 엔진 동작 과정

렌더링 엔진은 통신으로부터 요청한 문서의 내용을 얻는 것으로 시작하는데 문서의 내용은 보통 8kb 단위로 전송됩니다. 다음은 렌더링 엔진의 기본적인 동작 과정입니다.

<br/>

![](./images/render.png)

<br/>

렌더링 엔진은 HTML 문서를 파싱하고 '콘텐츠 트리' 내부에서 태그를 DOM 노드로 변환합니다. 그 다음 외부 CSS 파일과 함께 포함된 스타일 요소도 파싱합니다. 스타일 정보와 HTML 표시 규칙은 '렌더 트리'라고 부르는 또 다른 트리를 생성합니다.

렌더 트리는 색상 또는 면적과 같은 시각적 속성이 있는 사각형을 포함하고 있는데 정해진 순서대로 화면에 표시됩니다. 렌더 트리 생성이 끝나면 배치가 시작되는데 이것은 각 노드가 화면의 정확한 위치에 표시되는 것을 의미합니다.

일련의 과정들이 점진적으로 진행된다는 것을 아는 것이 중요합니다. 렌더링 엔진은 좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시하는데 모든 HTML을 파싱할 때까지 기다리지 않고 배치와 그리기 과정을 시작합니다. 네트워크로부터 나머지 내용이 전송되기를 기다리는 동시에 받은 내용의 일부를 먼저 화면에 표시하는 것입니다. 즉, 브라우저는 렌더링 우선이군요.

<hr />

## Source

[D2 - 브라우저는 어떻게 동작하는가?](https://d2.naver.com/helloworld/59361)
